import{A as N,F as U,_ as V,a as j,b as L,c as q,d as K,e as P}from"./ContextMenuTrigger.vue_vue_type_script_setup_true_lang-BwnRl_c6.js";import{T as W,a as G,_ as H}from"./RenameDialog.vue_vue_type_script_setup_true_lang-Cim12Utq.js";import{d as M,h as I,l as J,p as Q,q as F,o as c,a as u,c as e,w as p,g as f,s as R,n as X,u as n,v as Y,t as b,b as y,x as z,F as O,y as Z,z as ee,A as te,r as oe,i as ne}from"./index-DBfi-iYF.js";import{u as se,a as $,h as le}from"./Input.vue_vue_type_script_setup_true_lang-D93yzfFd.js";import{R as ae}from"./route-B2zbDueE.js";import{_ as ce}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./createLucideIcon-C5YStjzx.js";const ie=["src"],re={class:"w-full h-full bg-zinc-900 flex items-center justify-center"},pe={class:"flex flex-col gap-1"},ue={class:"flex font-medium text-sm opacity-80 select-none"},de={class:"flex text-xs opacity-30 select-none"},fe=M({__name:"FlowAppsItem",props:{flowApp:{},selected:{type:Boolean}},emits:["onSelect"],setup(v,{emit:m}){const l=v,i=m,x=I(()=>{var o;const s=(o=l.flowApp.thumbnail)==null?void 0:o.data;return s?s.startsWith("data:image")?s:`${J}${s}`:void 0}),g=Q();function r(){g.push({name:"FlowApp",params:{id:l.flowApp.id}})}const{shift:C}=se();function A(){C.value?i("onSelect"):r()}const t=F(!1);function _(){$("FlowApps::Refresh").emit()}const a=F(!1);function d(){$("FlowApps::Refresh").emit()}return(s,o)=>{const S=V,h=j,k=L,B=q,D=K,T=H,E=P;return c(),u(O,null,[e(D,{onContextmenu:o[2]||(o[2]=R(()=>{},["prevent"]))},{default:p(()=>[e(S,null,{default:p(()=>[f("div",{class:"group flex flex-col space-y-2 cursor-pointer",onClick:R(A,["stop"]),onDblclick:r},[f("div",{class:X(["w-full aspect-video rounded-xl overflow-hidden transition-all",[s.selected&&"border-2 border-primary-500"]])},[n(x)?(c(),u("img",{key:0,src:n(x),class:"w-full h-full object-cover group-hover:scale-105 transition-all"},null,8,ie)):Y("",!0),f("div",re,[e(n(ae),{size:24,class:"opacity-30 -rotate-45 group-hover:scale-110 transition-all"})])],2),f("div",pe,[f("div",ue,b(s.flowApp.name),1),f("div",de,b(s.flowApp.description),1)])],32)]),_:1}),e(B,{class:"w-44"},{default:p(()=>[e(h,{onClick:r},{default:p(()=>[e(n(N),{size:15,class:"mr-1.5 opacity-60"}),y(" 打开 App ")]),_:1}),e(k),e(h,{onClick:o[0]||(o[0]=w=>t.value=!0)},{default:p(()=>[e(n(W),{size:15,class:"mr-1.5 opacity-60"}),y(" 重命名 ")]),_:1}),e(h,null,{default:p(()=>[e(n(U),{size:15,class:"mr-1.5 opacity-60"}),y(" 设置封面 ")]),_:1}),e(k),e(h,{onClick:o[1]||(o[1]=w=>a.value=!0)},{default:p(()=>[e(n(G),{size:15,class:"mr-1.5 opacity-60"}),y(" 删除 ")]),_:1})]),_:1})]),_:1}),e(T,{"dialog-open":n(t),"onUpdate:dialogOpen":o[3]||(o[3]=w=>z(t)?t.value=w:null),flow:s.flowApp,onOnUpdate:_},null,8,["dialog-open","flow"]),e(E,{open:n(a),"onUpdate:open":o[4]||(o[4]=w=>z(a)?a.value=w:null),flows:[s.flowApp],onOnDeleted:d},null,8,["open","flows"])],64)}}}),me={class:"w-full"},_e={key:0,class:"flows-grid"},we={key:1,class:"flex items-center justify-center h-[calc(100vh-200px)] text-center text-zinc-600"},ve=M({__name:"FlowAppsContainer",props:{currentFolder:{}},setup(v){const m=v,l=F([]),i=F([]),x=I(()=>i.value.map(t=>t.id));async function g(){var t;return await le.query({folderId:(t=m.currentFolder)==null?void 0:t.id})}async function r(){l.value=await g()}function C(t){const _=i.value.findIndex(a=>a.id===t.id);_===-1?i.value.push(t):i.value.splice(_,1)}function A(t){t.stopPropagation(),i.value=[]}return Z(async()=>{await r(),document.addEventListener("click",A)}),ee(()=>{document.removeEventListener("click",A)}),te(()=>m.currentFolder,async()=>{await r()}),$("Flows::Refresh").on(async()=>{await r()}),(t,_)=>{const a=fe;return c(),u("div",me,[n(l).length?(c(),u("div",_e,[(c(!0),u(O,null,oe(n(l),d=>(c(),ne(a,{key:d.id,"flow-app":d,selected:n(x).includes(d.id),onOnSelect:s=>C(d)},null,8,["flow-app","selected","onOnSelect"]))),128))])):(c(),u("div",we," 还没有生成 App~ "))])}}}),xe={};function Ae(v,m){const l=ve;return c(),u("div",null,[e(l)])}const Re=ce(xe,[["render",Ae]]);export{Re as default};
